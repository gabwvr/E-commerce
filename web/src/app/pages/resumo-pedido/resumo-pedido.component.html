<!-- Template do Resumo do Pedido: mostra dados do pedido, entrega e itens -->
<div>
  <div *ngIf="mensagem" class="aviso" role="alert" aria-live="polite" style="margin-bottom: 8px;">
    <div class="texto">{{ mensagem }}</div>
    <button class="fechar" (click)="mensagem=null" aria-label="Fechar aviso">Fechar</button>
  </div>
  <div *ngIf="!resumo" class="card" style="padding: 14px;">Carregando...</div>
  <div *ngIf="resumo" class="card" style="padding: 16px;">
    <div class="titulo"><span class="material-symbols-rounded">receipt_long</span> Nota Fiscal / Resumo do Pedido</div>
    <div class="card" style="padding: 12px; margin-bottom: 12px; display:flex; gap:16px; flex-wrap:wrap;">
      <div><strong>Pedido Nº</strong> {{ resumo.numero }}</div>
      <div><strong>Total</strong>: {{ resumo.total | currency:'BRL':'symbol':'1.2-2' }}</div>
      <div><strong>Data</strong>: {{ resumo.criado_em | date:'short' }}</div>
    </div>

    <div class="titulo"><span class="material-symbols-rounded">location_on</span> Entrega</div>
    <div *ngIf="resumo.endereco; else semEndereco" class="card" style="padding: 12px; margin-bottom: 12px;">
      <div>{{ resumo.endereco.rua }}, {{ resumo.endereco.numero }} - {{ resumo.endereco.bairro }}</div>
      <div>{{ resumo.endereco.cidade }} / {{ resumo.endereco.estado }} - CEP {{ resumo.endereco.cep }}</div>
    </div>
    <ng-template #semEndereco>
      <div class="card" style="padding: 12px; margin-bottom: 12px;">Sem endereço selecionado.</div>
    </ng-template>

    <div class="titulo"><span class="material-symbols-rounded">inventory_2</span> Itens</div>
    <div *ngFor="let i of resumo.itens" class="card" style="padding: 12px; margin-bottom: 10px; display:flex; align-items:center; justify-content:space-between; gap:10px;">
      <div style="flex:1">
        <div><strong>{{ i.nome }}</strong></div>
        <div style="color: var(--muted)">Preço: {{ i.preco | currency:'BRL':'symbol':'1.2-2' }} | Qtd: {{ i.quantidade }} | Subtotal: {{ i.subtotal | currency:'BRL':'symbol':'1.2-2' }}</div>
      </div>
    </div>
    <div style="display:flex; gap:8px; margin-top: 8px;">
      <a routerLink="/catalogo" class="link-acao">Voltar ao catálogo</a>
      <a routerLink="/carrinho" class="link-acao">Ver carrinho</a>
    </div>
  </div>
</div>
